{% extends 'generator/base.html' %}

{% block title %}{% if current_lang == 'en' %}Password Generator{% else %}–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–∞—Ä–æ–ª–µ–π{% endif %} - Secure Password Generator{% endblock %}

{% block content %}
<div class="card">
    <h1>üîê {% if current_lang == 'en' %}Password Generator{% else %}–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–∞—Ä–æ–ª–µ–π{% endif %}</h1>
    
    <form method="POST">
        {% csrf_token %}
        
        <label for="length"><strong>{% if current_lang == 'en' %}Password length:{% else %}–î–ª–∏–Ω–∞ –ø–∞—Ä–æ–ª—è:{% endif %}</strong></label>
        <input type="number" id="length" name="length" value="{{ length }}" min="4" max="128" required>
        
        <h2>{% if current_lang == 'en' %}Character types:{% else %}–¢–∏–ø—ã —Å–∏–º–≤–æ–ª–æ–≤:{% endif %}</h2>
        <div class="checkbox-group">
            <div class="checkbox-item">
                <input type="checkbox" id="uppercase" name="uppercase" {% if uppercase %}checked{% endif %}>
                <label for="uppercase">{% if current_lang == 'en' %}Uppercase letters{% else %}–ó–∞–≥–ª–∞–≤–Ω—ã–µ –±—É–∫–≤—ã{% endif %}</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="lowercase" name="lowercase" {% if lowercase %}checked{% endif %}>
                <label for="lowercase">{% if current_lang == 'en' %}Lowercase letters{% else %}–°—Ç—Ä–æ—á–Ω—ã–µ –±—É–∫–≤—ã{% endif %}</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="digits" name="digits" {% if digits %}checked{% endif %}>
                <label for="digits">{% if current_lang == 'en' %}Digits{% else %}–¶–∏—Ñ—Ä—ã{% endif %}</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="special" name="special" {% if special %}checked{% endif %}>
                <label for="special">{% if current_lang == 'en' %}Special characters{% else %}–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã{% endif %}</label>
            </div>
        </div>
        
        <button type="submit" class="btn">{% if current_lang == 'en' %}Generate passwords{% else %}–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª–∏{% endif %}</button>
    </form>
    
    {% if passwords %}
    <div class="password-list">
        <h2 style="margin-top: 2rem;">{% if current_lang == 'en' %}Generated passwords:{% else %}–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–æ–ª–∏:{% endif %}</h2>
        {% for password in passwords %}
        <div class="password-item">
            <span class="password-text">{{ password }}</span>
            <button class="copy-btn" onclick="copyToClipboard('{{ password }}', this)">{% if current_lang == 'en' %}Copy{% else %}–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å{% endif %}</button>
            <span class="success-message">‚úì {% if current_lang == 'en' %}Copied!{% else %}–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!{% endif %}</span>
        </div>
        {% endfor %}
    </div>
    {% endif %}
</div>
{% endblock %}

{% block extra_js %}
<script>
function copyToClipboard(text, button) {
    navigator.clipboard.writeText(text).then(function() {
        var successMsg = button.nextElementSibling;
        successMsg.style.display = 'inline';
        setTimeout(function() { successMsg.style.display = 'none'; }, 2000);
    }).catch(function() {
        var textarea = document.createElement('textarea');
        textarea.value = text;
        textarea.style.position = 'fixed';
        textarea.style.opacity = '0';
        document.body.appendChild(textarea);
        textarea.select();
        try {
            document.execCommand('copy');
            var successMsg = button.nextElementSibling;
            successMsg.style.display = 'inline';
            setTimeout(function() { successMsg.style.display = 'none'; }, 2000);
        } catch (e) {}
        document.body.removeChild(textarea);
    });
}
</script>
{% endblock %}
